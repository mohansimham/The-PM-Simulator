<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1: PM Fundamentals - Airbnb Platform Evolution</title>
    <meta name="description" content="Test your product management fundamentals with this Airbnb case study simulation.">
    
    <!-- Open Graph for LinkedIn sharing -->
    <meta property="og:title" content="Week 1: PM Fundamentals - Airbnb Simulation">
    <meta property="og:description" content="Can you navigate Airbnb's early growth decisions? Test your PM skills.">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Professional formal color overrides */
        .bg-indigo-600 { background-color: #1e40af !important; } /* Navy blue */
        .bg-indigo-100 { background-color: #dbeafe !important; } /* Light blue */
        .text-indigo-600 { color: #1e40af !important; }
        .border-indigo-500 { border-color: #2563eb !important; }
        .from-indigo-600 { --tw-gradient-from: #1e40af !important; }
        .to-blue-600 { --tw-gradient-to: #3b82f6 !important; } /* Professional blue */
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        const { useState, useEffect } = React;
        const { createElement: h } = React;

        // Google Apps Script Web App URL for email collection
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz6E8UJUn5xhilm2pLWjdvaip_6MnSCf-XRVPv5u4hOttjr0SNCu9I10q2ESLKGQ04_mQ/exec';

        // Icon components as simple SVGs
        const Share2Icon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8' }),
            h('polyline', { points: '16 6 12 2 8 6' }),
            h('line', { x1: 12, y1: 2, x2: 12, y2: 15 })
        );

        const MailIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z' }),
            h('polyline', { points: '22,6 12,13 2,6' })
        );

        const TrophyIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M6 9H4.5a2.5 2.5 0 0 1 0-5H6' }),
            h('path', { d: 'M18 9h1.5a2.5 2.5 0 0 0 0-5H18' }),
            h('path', { d: 'M4 22h16' }),
            h('path', { d: 'M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22' }),
            h('path', { d: 'M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22' }),
            h('path', { d: 'M18 2H6v7a6 6 0 0 0 12 0V2Z' })
        );

        const TrendingUpIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('polyline', { points: '23 6 13.5 15.5 8.5 10.5 1 18' }),
            h('polyline', { points: '17 6 23 6 23 12' })
        );

        const UsersIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
            h('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
            h('circle', { cx: 9, cy: 7, r: 4 }),
            h('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
            h('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
        );

        function PMSimulation() {
            const [email, setEmail] = useState('');
            const [hasStarted, setHasStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [selectedAnswerIndex, setSelectedAnswerIndex] = useState(null);
            const [showResults, setShowResults] = useState(false);
            const [hasAttempted, setHasAttempted] = useState(false);

            useEffect(() => {
                // Creator backdoor: Check if URL has ?reset=true parameter
                const urlParams = new URLSearchParams(window.location.search);
                const resetMode = urlParams.get('reset') === 'true';
                
                if (resetMode) {
                    // Creator mode: Clear the attempt flag and allow retaking
                    localStorage.removeItem('pm_simulation_week1_attempted');
                    setHasAttempted(false);
                } else {
                    // Normal mode: Check if already attempted
                    const attempted = localStorage.getItem('pm_simulation_week1_attempted');
                    if (attempted) {
                        setHasAttempted(true);
                    }
                }
            }, []);

            const simulation = {
                title: "Airbnb's Platform Evolution: PM Fundamentals",
                company: "Airbnb",
                week: "Week 1",
                year: "2026",
                description: "You're a PM at early-stage Airbnb. The company started by renting air mattresses during a design conference. Now you need to scale to a global platform. Make critical decisions that will define what product management means at Airbnb.",
                questions: [
                    {
                        id: 1,
                        scenario: "The founders want to know: What's the difference between a Product Manager and a Project Manager? Your answer will shape your role.",
                        question: "How do you explain your role as a PM?",
                        options: [
                            {
                                text: "I manage timelines, coordinate teams, and ensure projects ship on time. I'm the glue that keeps everyone aligned.",
                                points: 20,
                                feedback: "This describes a Project Manager, not a Product Manager. PMs focus on the 'what' and 'why' (product strategy, user value), while Project Managers focus on the 'when' and 'how' (execution, timelines). You're confusing the two roles."
                            },
                            {
                                text: "I define what to build based on user needs and business goals. I own the product vision and prioritize features. Project Managers handle execution.",
                                points: 45,
                                feedback: "Excellent! This captures the essence of product management. PMs are the 'CEO of the product' - they own the vision, strategy, and prioritization. Project/Program Managers then execute that vision. This is the correct distinction."
                            },
                            {
                                text: "I write user stories for engineers and attend standups. I make sure the backlog is prioritized.",
                                points: 25,
                                feedback: "This describes a Product Owner in Scrum, not a strategic Product Manager. While PMs do write user stories, that's just one small part. You're missing the strategic thinking, user research, business analysis, and vision-setting aspects."
                            },
                            {
                                text: "I do whatever needs to be done - sometimes strategy, sometimes execution, sometimes both. The role is fluid.",
                                points: 15,
                                feedback: "While startup PMs do wear many hats, this answer shows unclear role definition. Without clarity on what a PM uniquely does, you'll be pulled in every direction and won't add strategic value. Even in startups, PMs must own product decisions, not just 'help out.'"
                            }
                        ]
                    },
                    {
                        id: 2,
                        scenario: "Airbnb has two customer types: hosts (supply) and guests (demand). Your engineering team can only focus on one this quarter. Both are critical to the marketplace.",
                        question: "Who do you prioritize?",
                        options: [
                            {
                                text: "Prioritize guests. More guests = more bookings = more revenue. Hosts will come if there's demand.",
                                points: 25,
                                feedback: "Demand-side thinking, but risky for a marketplace. Without quality supply (hosts), guest experience suffers and they don't return. Uber learned this - without drivers, riders churn. You need to balance both sides of the marketplace."
                            },
                            {
                                text: "Prioritize hosts. Great listings attract guests organically. Supply quality drives demand.",
                                points: 35,
                                feedback: "Strong supply-side focus. This mirrors Airbnb's actual strategy - they invested heavily in professional photography for hosts, which dramatically improved conversion. Supply quality is often the constraint in marketplaces. Good answer, though you should acknowledge the risk of ignoring guests."
                            },
                            {
                                text: "Split resources 50/50. Both sides are important, so divide the team equally.",
                                points: 15,
                                feedback: "This sounds fair but is strategically weak. Splitting resources means you won't move the needle on either side. PMs must make tough choices. As the saying goes, 'If everything is important, nothing is important.' Pick the constraint and go all-in."
                            },
                            {
                                text: "Analyze data: Which side has lower satisfaction scores or higher churn? Fix the bottleneck first.",
                                points: 45,
                                feedback: "Excellent product thinking! You're using data to identify the constraint in the marketplace. This is exactly what strong PMs do - let metrics guide prioritization, not opinions. Airbnb used this approach: when host signups lagged, they focused there. When booking conversion was the issue, they optimized guest experience."
                            }
                        ]
                    },
                    {
                        id: 3,
                        scenario: "Your CEO wants Airbnb to expand to 10 new cities this quarter. Your engineer lead says the platform has critical technical debt that needs fixing. Both are escalating to you.",
                        question: "How do you resolve this conflict?",
                        options: [
                            {
                                text: "Side with the CEO. Growth is the priority at a startup. Technical debt can wait.",
                                points: 20,
                                feedback: "Short-term thinking that creates long-term problems. Ignoring tech debt leads to slower development, more bugs, and eventually a re-platform. Twitter and Friendster both collapsed under tech debt. PMs must balance short-term growth with long-term sustainability."
                            },
                            {
                                text: "Side with engineering. Technical debt will slow us down eventually. Fix it now before it's worse.",
                                points: 25,
                                feedback: "Engineering-first thinking, but you're ignoring business reality. In startups, perfect code doesn't matter if you run out of cash before finding product-market fit. Instagram famously had terrible technical debt but kept shipping features to grow. Balance is key."
                            },
                            {
                                text: "Negotiate a compromise: Launch 5 cities (not 10) and dedicate 30% of eng time to critical tech debt.",
                                points: 45,
                                feedback: "Excellent stakeholder management! You're showing PM leadership by making a tough call that neither side wanted but both can live with. This is exactly what PMs do - balance competing priorities with data and rationale. You're demonstrating that you understand both business urgency and technical sustainability."
                            },
                            {
                                text: "Escalate to the founders. This is above my pay grade.",
                                points: 10,
                                feedback: "You're abdicating responsibility. PMs are hired precisely to make these hard trade-off decisions. If you escalate every conflict, you're not adding value. The founders hired you to own these calls. Make a recommendation with your reasoning, then get their input if needed."
                            }
                        ]
                    },
                    {
                        id: 4,
                        scenario: "A competitor (VRBO) has more listings than Airbnb. Your VP Sales wants you to copy their features. Your designer wants to differentiate with a unique experience.",
                        question: "What's your product strategy?",
                        options: [
                            {
                                text: "Copy VRBO's features. They're winning, so they must be doing something right. Fast-follow strategy.",
                                points: 15,
                                feedback: "Dangerous strategy. Fast-following makes you a perpetual #2. Instagram didn't copy Facebook, they focused on mobile-first photos. Zoom didn't copy Skype, they focused on reliability. Airbnb won by emphasizing 'belonging' and unique stays, not by copying VRBO's vacation rentals."
                            },
                            {
                                text: "Ignore competitors. Focus on our users and what they need. Competition is a distraction.",
                                points: 25,
                                feedback: "Admirable customer focus, but naive. You can't ignore competitive dynamics. Airbnb studied VRBO extensively but chose to differentiate on trust (reviews, verified photos) and experience (unique homes, not just vacation rentals). Know your competition, then consciously choose to zig while they zag."
                            },
                            {
                                text: "Analyze what VRBO does well, but find gaps where we can differentiate and win. Competitive advantage.",
                                points: 45,
                                feedback: "Perfect strategic thinking! This is exactly what Airbnb did. They saw VRBO focused on vacation rentals (beach houses, cabins) but missed urban apartments and unique experiences (treehouses, castles). Airbnb found whitespace in the market. Great PMs know their competition but find where they can uniquely win."
                            },
                            {
                                text: "Let's differentiate with design. Make our app beautiful. Design-led strategy.",
                                points: 20,
                                feedback: "Design matters, but it's not a strategy. Beautiful design on the wrong product is lipstick on a pig. Airbnb did eventually become design-forward, but only after solving core trust issues (verified photos, reviews, insurance). Strategy first, design second."
                            }
                        ]
                    },
                    {
                        id: 5,
                        scenario: "Your first hire decision. You can hire: (A) A senior engineer to build faster, (B) A data analyst to make better decisions, or (C) A designer to improve UX. Budget for one hire only.",
                        question: "Who do you hire?",
                        options: [
                            {
                                text: "Senior engineer. Speed of execution is critical at our stage. We need to ship faster.",
                                points: 25,
                                feedback: "Reasonable for an early-stage startup focused on product-market fit. More engineering velocity helps you test hypotheses faster. However, you're assuming you know what to build. Without data or design thinking, you might ship the wrong things faster."
                            },
                            {
                                text: "Data analyst. We're making gut decisions without data. Let's be more analytical.",
                                points: 35,
                                feedback: "Strong choice for a marketplace. Airbnb's early data hires helped them understand that professional photography increased bookings 2-3x. Data helps you prioritize ruthlessly. Good answer, though some might argue design/trust is more critical at this stage."
                            },
                            {
                                text: "Designer. Trust is our biggest barrier. Users won't book without confidence. Design builds trust.",
                                points: 45,
                                feedback: "Excellent strategic thinking! This was Airbnb's actual insight. Their breakthrough came when they sent photographers to hosts' homes for free professional photos. Design wasn't just aesthetics - it was trust-building. Great PMs understand what the true constraint is, not just what's most urgent."
                            },
                            {
                                text: "None. I'll split my time across eng, data, and design. Generalist PM approach.",
                                points: 10,
                                feedback: "You're trying to do everything and will excel at nothing. PMs aren't experts in eng, data, AND design. You need specialists. Your job is to orchestrate specialists, not replace them. This answer shows poor understanding of PM leverage and team building."
                            }
                        ]
                    },
                    {
                        id: 6,
                        scenario: "A host reports that a guest trashed their home. The guest disputes it. This is the first major trust incident. Your response will set precedent for how Airbnb handles conflicts.",
                        question: "What do you do?",
                        options: [
                            {
                                text: "Side with the host. Hosts are our supply - we can't lose them. Refund the host, ban the guest.",
                                points: 20,
                                feedback: "Supply-focused but unbalanced. What if the host is lying? Marketplace platforms must be fair arbiters, not take sides reflexively. Uber learned this - if drivers felt empowered to ban riders unfairly, it would be chaos. You need a fair process, not a default stance."
                            },
                            {
                                text: "Create a neutral investigation process. Gather evidence (photos, messages) before deciding. Build a precedent for fairness.",
                                points: 45,
                                feedback: "Excellent! This is exactly what Airbnb did. They built a Host Guarantee program and a resolution center with evidence-based processes. Great PMs think in systems, not one-off decisions. You're setting up infrastructure that scales. This shows maturity in thinking about product lifecycle - from launch to operations."
                            },
                            {
                                text: "Offer a small goodwill gesture to both sides ($100 credit each). Move on quickly.",
                                points: 15,
                                feedback: "Band-aid solution that doesn't solve the underlying problem. What happens at the next conflict? And the 100th? You're avoiding the hard work of building proper trust and safety systems. This is reactive PM thinking, not strategic."
                            },
                            {
                                text: "Escalate to the founders. Trust & safety should be their call, not mine.",
                                points: 10,
                                feedback: "You're ducking responsibility. This is exactly the kind of product decision PMs are hired to make. Founders can't resolve every conflict. You need to propose a solution (with options and trade-offs), then get their input. Own the problem."
                            }
                        ]
                    },
                    {
                        id: 7,
                        scenario: "You have data on user behavior but it conflicts with what users say in interviews. Users say they want 'cheap prices' but data shows they book mid-priced listings with great photos. Which do you trust?",
                        question: "How do you reconcile this?",
                        options: [
                            {
                                text: "Trust the data. Users don't know what they want. Ignore what they say, watch what they do.",
                                points: 35,
                                feedback: "Strong data-driven thinking. You're right that behavior > words. This is a classic PM insight. However, you're missing nuance. Qualitative research helps you understand WHY users behave certain ways. The best PMs combine both. Airbnb learned users wanted 'cheap' because they didn't trust hosts enough to pay premium prices. Solution: Build trust (reviews, photos), then users willingly pay more."
                            },
                            {
                                text: "Trust the users. They're telling us price is the issue. Let's focus on making listings cheaper.",
                                points: 15,
                                feedback: "You're falling for the classic user research trap: Users say one thing but do another. Henry Ford's famous quote: 'If I asked people what they wanted, they'd say faster horses.' Your job as PM is to understand the underlying need (I need to get somewhere faster), not the stated solution (faster horses)."
                            },
                            {
                                text: "Dig deeper. Users say 'cheap' but maybe they mean 'good value.' Test hypothesis: Do great photos/reviews justify higher prices?",
                                points: 45,
                                feedback: "Perfect! You're combining qual and quant insights. This is exactly what Airbnb discovered - users wanted confidence in their purchase, not just low prices. When trust signals were strong (photos, reviews), they'd pay more. Great PMs don't just collect data, they synthesize it into insights. You're showing the analytical rigor that separates good PMs from great ones."
                            },
                            {
                                text: "Run an A/B test. Show one group low-price listings, another group high-quality listings. See what converts better.",
                                points: 30,
                                feedback: "Good instinct to test, but you're oversimplifying. A/B tests work best when you have a clear hypothesis. What are you learning from this test? That users prefer quality over price? You could have deduced that from existing data. Better to test specific interventions (e.g., 'Does adding professional photos increase willingness to pay 20% more?')."
                            }
                        ]
                    },
                    {
                        id: 8,
                        scenario: "Your roadmap has 20 features. Realistically you can ship 5 this quarter. Stakeholders (marketing, sales, support, founders) are all lobbying for their priorities.",
                        question: "How do you prioritize?",
                        options: [
                            {
                                text: "Build a scoring framework (impact, effort, strategic value). Score all 20 features. Ship top 5.",
                                points: 45,
                                feedback: "Excellent! This is the RICE framework (Reach, Impact, Confidence, Effort) or similar prioritization methodology. You're bringing structure to what could be an emotional debate. Scoring forces stakeholders to justify their requests with data. This is exactly how top PMs (at Intercom, Airbnb, Stripe) make prioritization transparent and defensible."
                            },
                            {
                                text: "Let stakeholders vote. Highest votes win. Democratic approach.",
                                points: 15,
                                feedback: "Democracy doesn't work in product management. The loudest voices win, not the best ideas. Also, stakeholders are biased toward their own goals. Marketing always wants growth features, support wants bug fixes, sales wants enterprise features. Your job as PM is to weigh all inputs but make the final call based on user value and business impact."
                            },
                            {
                                text: "Ask founders to prioritize. They have the vision and context I don't have.",
                                points: 20,
                                feedback: "You're deferring too much. Yes, get founder input on strategy, but they hired you to make prioritization calls. If founders have to decide every feature, you're not adding PM value. Bring them a recommendation (with rationale and alternatives), then align on direction."
                            },
                            {
                                text: "Focus on features that unblock revenue. We need to survive. Everything else is a distraction.",
                                points: 25,
                                feedback: "Short-term thinking with some merit. Yes, startups need revenue to survive. But obsessing over monetization too early can kill user growth. Instagram didn't monetize for years. Airbnb initially focused on trust and supply quality, not immediate revenue optimization. Balance short-term survival with long-term value creation."
                            }
                        ]
                    },
                    {
                        id: 9,
                        scenario: "You shipped a feature that's technically working but users are confused. Support tickets are up 3x. Engineering says 'it works as designed.' What does 'working' mean?",
                        question: "How do you define success?",
                        options: [
                            {
                                text: "Working = feature is live and functional. The code does what the spec said. Success.",
                                points: 10,
                                feedback: "This is an engineering definition of success, not a product definition. If users can't figure out how to use the feature, it's not successful - it's technical debt masquerading as a feature. This answer shows you don't understand the PM role: Your job is user value, not feature output."
                            },
                            {
                                text: "Working = users can complete their task without confusion. Success = lower support tickets and high user satisfaction.",
                                points: 45,
                                feedback: "Perfect! You understand that 'working' means working for users, not just working in code. This is the shift from feature factory to outcome-oriented PM. Melissa Perri's 'Escaping the Build Trap' is all about this mindset. You're measuring success by user behavior and satisfaction, not just 'is it live?'"
                            },
                            {
                                text: "Working = users adopt it. If 3x support tickets but usage is up, that's a win. Short-term pain for long-term gain.",
                                points: 25,
                                feedback: "You're half-right. Yes, usage matters more than support tickets sometimes. But 3x support load is unsustainable and suggests poor UX. Good products are intuitive. If you need this much hand-holding, the design is wrong. Better answer: 'Let's fix the UX so users don't need support.'"
                            },
                            {
                                text: "Working = meets the business goal. Did bookings increase? Did revenue go up? That's the only metric that matters.",
                                points: 30,
                                feedback: "Business-outcome focus is good, but you're ignoring user experience. A feature can drive short-term revenue while eroding long-term trust. Dark patterns (e.g., hidden fees, confusing cancellation) boost revenue initially but kill brand loyalty. Great PMs balance business outcomes with user satisfaction."
                            }
                        ]
                    },
                    {
                        id: 10,
                        scenario: "It's been 6 months. You've shipped features, but you're not sure if you're a good PM. No one has given you feedback. How do you know if you're succeeding?",
                        question: "How do you self-assess as a PM?",
                        options: [
                            {
                                text: "Look at team output: Features shipped, velocity, hitting deadlines. More output = better PM.",
                                points: 15,
                                feedback: "You're measuring activity, not impact. This is the 'feature factory' trap. Shipping 20 features that users don't care about is worse than shipping 2 features that solve real problems. Output is easy to measure but meaningless without outcome. Reframe: Are users better off because of what you shipped?"
                            },
                            {
                                text: "Look at product metrics: User growth, engagement, retention. If metrics are up, I'm doing well.",
                                points: 35,
                                feedback: "Much better - you're measuring outcomes! However, metrics can be misleading. Growth could be due to marketing spend, not product quality. Engagement could be addiction, not value. The best self-assessment combines: (1) Are metrics improving? (2) Are we solving real user problems? (3) Is the team operating well? (4) Am I learning and growing?"
                            },
                            {
                                text: "Ask for feedback from stakeholders: founders, engineers, designers. Do they think I'm effective?",
                                points: 40,
                                feedback: "Great instinct to seek feedback! Strong PMs are self-aware and actively seek input. However, don't wait 6 months - build feedback loops into your workflow (weekly 1:1s, monthly retros, quarterly PM reviews). Also, ask specific questions: 'How can I communicate better?' not 'Am I doing well?'"
                            },
                            {
                                text: "Reflect on: Am I making the team more effective? Are we building the right things? Am I improving as a PM? These are my measures.",
                                points: 45,
                                feedback: "Excellent self-assessment framework! You're asking the right questions. (1) Team effectiveness = Are you removing blockers, clarifying priorities, fostering collaboration? (2) Right things = Are you validating with users, measuring impact? (3) Personal growth = Are you learning frameworks, building domain expertise, improving stakeholder management? This is mature PM thinking. You're assessing both impact (what you deliver) and effectiveness (how you operate)."
                            }
                        ]
                    }
                ]
            };

            const sendToGoogleSheets = async (data) => {
                try {
                    await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                } catch (error) {
                    console.log('Email logging error:', error);
                }
            };

            const handleEmailSubmit = (e) => {
                e.preventDefault();
                if (email && email.includes('@')) {
                    sendToGoogleSheets({ email, simulation: 'Week 1 - PM Fundamentals', status: 'started' });
                    setHasStarted(true);
                }
            };

            const handleAnswer = (optionIndex) => {
                console.log('Answer clicked:', optionIndex); // Debug
                setSelectedAnswerIndex(optionIndex);
            };

            const handleNextChallenge = () => {
                if (selectedAnswerIndex === null) return;
                
                const currentQ = simulation.questions[currentQuestion];
                const selectedOption = currentQ.options[selectedAnswerIndex];
                
                const newAnswers = [...answers, { question: currentQuestion, points: selectedOption.points, feedback: selectedOption.feedback }];
                setAnswers(newAnswers);
                setSelectedAnswerIndex(null); // Reset selection for next question

                if (currentQuestion < simulation.questions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                } else {
                    const totalPoints = newAnswers.reduce((sum, answer) => sum + answer.points, 0);
                    const maxPoints = simulation.questions.reduce((sum, q) => sum + Math.max(...q.options.map(o => o.points)), 0);
                    const percentage = Math.round((totalPoints / maxPoints) * 100);
                    
                    let tier = '';
                    if (percentage >= 90) tier = 'Strategic Mastery';
                    else if (percentage >= 75) tier = 'Applied Proficiency';
                    else if (percentage >= 60) tier = 'Core Competency';
                    else tier = 'Foundational Understanding';
                    
                    sendToGoogleSheets({ 
                        email, 
                        simulation: 'Week 1 - PM Fundamentals',
                        score: totalPoints,
                        percentage,
                        tier
                    });
                    
                    setShowResults(true);
                    localStorage.setItem('pm_simulation_week1_attempted', 'true');
                }
            };

            const calculateScore = () => {
                const totalPoints = answers.reduce((sum, answer) => sum + answer.points, 0);
                const maxPoints = simulation.questions.reduce((sum, q) => sum + Math.max(...q.options.map(o => o.points)), 0);
                return { totalPoints, maxPoints, percentage: Math.round((totalPoints / maxPoints) * 100) };
            };

            const getNarrative = (percentage) => {
                if (percentage >= 90) {
                    return {
                        title: "Strategic Mastery",
                        text: "Outstanding! You demonstrated exceptional understanding of PM fundamentals. Your answers show you grasp the strategic nature of product management - balancing user needs, business goals, and team dynamics. You understand that PMs are decision-makers who use frameworks, data, and judgment to drive outcomes. You're thinking like a seasoned PM who knows when to lead, when to listen, and when to dig deeper. This level of product intuition typically takes years to develop.",
                        tier: "Strategic Mastery"
                    };
                } else if (percentage >= 75) {
                    return {
                        title: "Applied Proficiency",
                        text: "Strong performance! You showed solid grasp of PM core competencies. You understand the PM role is about making tough trade-off decisions with incomplete information. Your answers reflect good judgment on prioritization, stakeholder management, and user-centric thinking. A few decisions leaned too heavily on one dimension (execution vs strategy, or data vs intuition). The best PMs balance all aspects. Keep practicing framework-driven decision making and study real PM case studies to sharpen your instincts.",
                        tier: "Applied Proficiency"
                    };
                } else if (percentage >= 60) {
                    return {
                        title: "Core Competency",
                        text: "You're building a solid foundation in product management. You understand some key concepts - PMs make decisions, use data, balance stakeholders - but missed opportunities to apply structured thinking. Several answers confused PM with Project Manager or Product Owner roles, or showed tactical thinking where strategic thinking was needed. Focus on learning frameworks like RICE prioritization, Jobs-to-be-Done, and the distinction between outputs (features) and outcomes (user value). Read 'Inspired' by Marty Cagan and study how top PMs think.",
                        tier: "Core Competency"
                    };
                } else {
                    return {
                        title: "Foundational Understanding",
                        text: "You're at the beginning of your PM journey. Several answers suggest you're still learning what product management fundamentally is - it's not project management, not product ownership, and not just shipping features. PMs are strategic decision-makers who discover what users need, prioritize ruthlessly, and drive business outcomes. Start with fundamentals: Read 'Inspired' by Marty Cagan, study the product lifecycle, and learn prioritization frameworks. Watch PM interviews and case study breakdowns. The good news: These are all learnable skills. Keep studying and practicing!",
                        tier: "Foundational Understanding"
                    };
                }
            };

            const shareToLinkedIn = () => {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);
                
                // Track share event in Google Sheets
                sendToGoogleSheets({ 
                    email, 
                    simulation: 'Week 1 - PM Fundamentals',
                    score: score.totalPoints,
                    percentage: score.percentage,
                    tier: narrative.tier,
                    action: 'SHARED_ON_LINKEDIN'
                });
                
                // Create shareable text with simulation URL
                const simulationUrl = window.location.href.split('?')[0];
                
                const shareText = `ðŸŽ¯ I just completed PM Simulation 1/20!

My Result: ${score.percentage}% - ${narrative.tier}

Challenge: "${simulation.title}"

What I was tested on:
â€¢ PM vs Project Manager role clarity
â€¢ Stakeholder management & prioritization
â€¢ Data-driven decision making
â€¢ Defining product success metrics

This simulation tests real-world PM thinking through Airbnb's early-stage growth decisions.

Think you can beat my score?
Take the free simulation: ${simulationUrl}

#ProductManagement #PMSkills #CareerGrowth #Leadership
#ProductStrategy #TechCareers

ðŸ‘‰ Follow for 20 PM simulations: linkedin.com/in/mohansimham`;

                // Show modal with instructions
                const modal = document.createElement('div');
                modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9999; padding: 20px;';
                
                const card = document.createElement('div');
                card.style.cssText = 'background: white; border-radius: 16px; padding: 32px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;';
                
                const previewText = shareText.replace(/</g, '&lt;').replace(/>/g, '&gt;');
                
                card.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ðŸŽ‰</div>
                        <h2 style="font-size: 24px; font-weight: bold; margin-bottom: 16px; color: #1f2937;">Ready to Share Your Achievement!</h2>
                        <p style="color: #6b7280; margin-bottom: 24px; line-height: 1.6;">Share your PM assessment results on LinkedIn in 3 easy steps:</p>
                        <ol style="text-align: left; color: #6b7280; margin-bottom: 24px; line-height: 1.8; padding-left: 24px;">
                            <li><strong>Click</strong> the button below (copies text + opens LinkedIn)</li>
                            <li><strong>Click "Start a post"</strong> on LinkedIn</li>
                            <li><strong>Paste</strong> (Ctrl+V or Cmd+V) and click Post! ðŸš€</li>
                        </ol>
                        <div style="background: #f3f4f6; padding: 16px; border-radius: 8px; margin-bottom: 24px; text-align: left; max-height: 250px; overflow-y: auto; font-size: 13px; line-height: 1.6; white-space: pre-wrap; color: #374151; font-family: monospace;">${previewText}</div>
                        <button id="copyShareBtn" style="width: 100%; background: #0A66C2; color: white; padding: 16px; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px; transition: all 0.3s;">
                            ðŸ“‹ Copy & Open LinkedIn
                        </button>
                        <button id="cancelBtn" style="width: 100%; background: #e5e7eb; color: #374151; padding: 12px; border: none; border-radius: 8px; font-size: 14px; font-weight: 500; cursor: pointer;">
                            Cancel
                        </button>
                    </div>
                `;
                
                modal.appendChild(card);
                document.body.appendChild(modal);
                
                // Add event listeners
                const copyBtn = document.getElementById('copyShareBtn');
                const cancelBtn = document.getElementById('cancelBtn');
                
                copyBtn.addEventListener('click', () => {
                    navigator.clipboard.writeText(shareText).then(() => {
                        window.open('https://www.linkedin.com/feed/', '_blank');
                        copyBtn.innerHTML = 'âœ… Copied! LinkedIn Opening...';
                        copyBtn.style.background = '#10b981';
                        setTimeout(() => {
                            if (modal.parentElement) {
                                document.body.removeChild(modal);
                            }
                        }, 2000);
                    }).catch(() => {
                        alert('Please copy manually:\n\n' + shareText);
                        window.open('https://www.linkedin.com/feed/', '_blank');
                    });
                });
                
                cancelBtn.addEventListener('click', () => {
                    if (modal.parentElement) {
                        document.body.removeChild(modal);
                    }
                });
                
                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
            };

            const downloadBadge = () => {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);
                
                // Track badge download event in Google Sheets
                sendToGoogleSheets({ 
                    email, 
                    simulation: 'Week 1 - PM Fundamentals',
                    score: score.totalPoints,
                    percentage: score.percentage,
                    tier: narrative.tier,
                    action: 'DOWNLOADED_BADGE'
                });
                
                // Create professional achievement badge
                const canvas = document.createElement('canvas');
                canvas.width = 1200;
                canvas.height = 675;
                const ctx = canvas.getContext('2d');
                
                // Background - Clean white with professional gradient accent
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Left accent bar - Navy blue gradient
                const leftGradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                leftGradient.addColorStop(0, '#1e40af');
                leftGradient.addColorStop(1, '#3b82f6');
                ctx.fillStyle = leftGradient;
                ctx.fillRect(0, 0, 20, canvas.height);
                
                // Top header section - Light blue background
                ctx.fillStyle = '#eff6ff';
                ctx.fillRect(20, 0, canvas.width - 20, 120);
                
                // Logo/Brand area top left
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 24px Arial, sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('PRODUCT MANAGEMENT', 60, 50);
                ctx.fillStyle = '#3b82f6';
                ctx.font = '18px Arial, sans-serif';
                ctx.fillText('Professional Assessment Certificate', 60, 80);
                
                // Badge indicator top right
                ctx.fillStyle = '#1e40af';
                ctx.fillRect(950, 30, 200, 50);
                ctx.fillStyle = '#ffffff';
                ctx.font = 'bold 16px Arial, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('SIMULATION 1/20', 1050, 60);
                
                // Main content area
                ctx.textAlign = 'center';
                
                // Achievement title
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 48px Arial, sans-serif';
                ctx.fillText('ACHIEVEMENT CERTIFICATE', 600, 200);
                
                // Divider line
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(300, 230);
                ctx.lineTo(900, 230);
                ctx.stroke();
                
                // Score section - Large and prominent
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 96px Arial, sans-serif';
                ctx.fillText(score.percentage + '%', 600, 340);
                
                // Tier badge
                const tierWidth = ctx.measureText(narrative.tier.toUpperCase()).width + 60;
                ctx.fillStyle = '#dbeafe';
                ctx.fillRect((canvas.width - tierWidth) / 2, 360, tierWidth, 50);
                ctx.fillStyle = '#1e40af';
                ctx.font = 'bold 28px Arial, sans-serif';
                ctx.fillText(narrative.tier.toUpperCase(), 600, 395);
                
                // Challenge name
                ctx.fillStyle = '#6b7280';
                ctx.font = '24px Arial, sans-serif';
                ctx.fillText('Airbnb Platform Evolution', 600, 450);
                ctx.font = '20px Arial, sans-serif';
                ctx.fillText('PM Fundamentals â€¢ Strategic Decision Making', 600, 480);
                
                // Bottom section - Curator and branding
                ctx.fillStyle = '#f9fafb';
                ctx.fillRect(20, 530, canvas.width - 20, 145);
                
                // Divider
                ctx.strokeStyle = '#e5e7eb';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(60, 530);
                ctx.lineTo(1140, 530);
                ctx.stroke();
                
                // Certificate text
                ctx.fillStyle = '#9ca3af';
                ctx.font = 'italic 18px Arial, sans-serif';
                ctx.fillText('This certificate validates completion of a comprehensive product management', 600, 570);
                ctx.fillText('assessment testing strategic thinking, prioritization, and decision-making skills.', 600, 595);
                
                // Curator info
                ctx.fillStyle = '#1f2937';
                ctx.font = 'bold 22px Arial, sans-serif';
                ctx.fillText('Curated by Mohan Simham', 600, 635);
                
                ctx.fillStyle = '#2563eb';
                ctx.font = 'bold 20px Arial, sans-serif';
                ctx.fillText('linkedin.com/in/mohansimham', 600, 660);
                
                // Decorative corner elements
                ctx.strokeStyle = '#3b82f6';
                ctx.lineWidth = 3;
                
                // Top right corner
                ctx.beginPath();
                ctx.moveTo(1140, 140);
                ctx.lineTo(1180, 140);
                ctx.lineTo(1180, 180);
                ctx.stroke();
                
                // Bottom left corner
                ctx.beginPath();
                ctx.moveTo(60, 510);
                ctx.lineTo(20, 510);
                ctx.lineTo(20, 550);
                ctx.stroke();
                
                // Download
                canvas.toBlob((blob) => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    const timestamp = new Date().toISOString().split('T')[0];
                    a.download = `PM-Simulation-Certificate-${score.percentage}pct-${timestamp}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    // Show success message
                    const successMsg = document.createElement('div');
                    successMsg.style.cssText = 'position: fixed; top: 20px; right: 20px; background: #10b981; color: white; padding: 16px 24px; border-radius: 8px; font-weight: 600; z-index: 10000; box-shadow: 0 4px 6px rgba(0,0,0,0.1); animation: slideIn 0.3s ease;';
                    successMsg.innerHTML = 'âœ… Certificate downloaded!<br><span style="font-size: 14px; font-weight: normal;">Ready to share on LinkedIn</span>';
                    document.body.appendChild(successMsg);
                    
                    setTimeout(() => {
                        successMsg.style.animation = 'slideOut 0.3s ease';
                        setTimeout(() => {
                            if (successMsg.parentElement) {
                                document.body.removeChild(successMsg);
                            }
                        }, 300);
                    }, 3000);
                });
            };

            if (hasAttempted && !hasStarted) {
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-6' },
                    h('div', { className: 'max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center' },
                        h('div', { className: 'w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4' },
                            h(TrophyIcon)
                        ),
                        h('h2', { className: 'text-2xl font-bold text-gray-900 mb-4' }, 'Already Completed!'),
                        h('p', { className: 'text-gray-600 mb-6' }, "You've already taken this simulation. Each learner gets one attempt to ensure thoughtful decision-making and fair competition."),
                        h('p', { className: 'text-sm text-gray-500' }, 'Want more PM simulations? Follow the course for upcoming modules!')
                    )
                );
            }

            if (!hasStarted) {
                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-6' },
                    h('div', { className: 'max-w-2xl w-full bg-white rounded-2xl shadow-xl overflow-hidden' },
                        h('div', { className: 'bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white' },
                            h('p', { className: 'text-sm font-semibold text-blue-100 mb-3 tracking-wide uppercase' }, 'âœ¨ Test Your Product Management Superpower'),
                            h('p', { className: 'text-xs text-blue-100 mb-4' }, 'Inspired by real product management business cases'),
                            h('div', { className: 'flex items-center gap-3 mb-4' },
                                h('div', { className: 'w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center' },
                                    h(TrendingUpIcon)
                                ),
                                h('div', null,
                                    h('div', { className: 'text-sm text-blue-100 mb-1' }, 'Simulation 1/20 â€¢ ' + simulation.year),
                                    h('h1', { className: 'text-2xl font-bold' }, simulation.title),
                                    h('p', { className: 'text-blue-100' }, simulation.company + ' Case Study')
                                )
                            ),
                            h('p', { className: 'text-xs text-blue-100' }, 
                                'Curated by Mohan Simham â€¢ ',
                                h('a', { 
                                    href: 'https://linkedin.com/in/mohansimham', 
                                    target: '_blank',
                                    className: 'underline hover:text-white transition-colors'
                                }, 'LinkedIn: /mohansimham')
                            )
                        ),
                        h('div', { className: 'p-8' },
                            h('p', { className: 'text-lg text-gray-700 mb-6' }, simulation.description),
                            
                            h('div', { className: 'bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-6 mb-6' },
                                h('div', { className: 'flex items-start gap-4' },
                                    h('div', { className: 'flex-shrink-0' },
                                        h('div', { className: 'w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-full flex items-center justify-center' },
                                            h(TrophyIcon, { className: 'w-8 h-8 text-white' })
                                        )
                                    ),
                                    h('div', { className: 'flex-1' },
                                        h('h3', { className: 'text-lg font-bold text-gray-900 mb-2' }, 'ðŸŽ¯ Earn Your Achievement Badge'),
                                        h('p', { className: 'text-sm text-gray-600 mb-3' }, 'Complete this simulation and share your personalized achievement badge on LinkedIn. Stand out as a certified PM professional!'),
                                        h('div', { className: 'bg-white rounded-lg p-4 border border-purple-200 shadow-sm' },
                                            h('div', { className: 'flex items-center gap-3 mb-2' },
                                                h('div', { className: 'w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded flex items-center justify-center flex-shrink-0' },
                                                    h('span', { className: 'text-white font-bold text-sm' }, '1/20')
                                                ),
                                                h('div', null,
                                                    h('div', { className: 'text-xs font-semibold text-blue-600' }, 'ACHIEVED'),
                                                    h('div', { className: 'text-sm font-bold text-gray-900' }, 'PM Fundamentals Master')
                                                )
                                            ),
                                            h('div', { className: 'text-xs text-gray-500 border-t border-gray-100 pt-2' }, 
                                                'Score: 92% â€¢ Strategic Mastery',
                                                h('div', { className: 'text-blue-600 font-medium mt-1' }, 'Curated by Mohan Simham')
                                            )
                                        ),
                                        h('p', { className: 'text-xs text-gray-500 mt-2 italic' }, 'ðŸ‘† Preview of what you\'ll share on LinkedIn')
                                    )
                                )
                            ),

                            h('div', { className: 'bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl p-5 mb-6' },
                                h('div', { className: 'flex items-center gap-3 mb-3' },
                                    h('div', { className: 'w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0' },
                                        h('svg', { className: 'w-7 h-7 text-white', viewBox: '0 0 24 24', fill: 'currentColor' },
                                            h('path', { d: 'M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z' })
                                        )
                                    ),
                                    h('div', { className: 'flex-1' },
                                        h('h3', { className: 'text-base font-bold text-gray-900' }, 'ðŸ‘¨â€ðŸ’¼ Follow Mohan Simham on LinkedIn'),
                                        h('p', { className: 'text-sm text-gray-600' }, 'Get access to 20 PM simulations, case studies, and career insights')
                                    )
                                ),
                                h('a', {
                                    href: 'https://linkedin.com/in/mohansimham',
                                    target: '_blank',
                                    className: 'block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-2.5 rounded-lg font-semibold transition-all text-sm'
                                }, 'â†’ Connect on LinkedIn: /mohansimham')
                            ),
                            
                            h('div', { className: 'bg-amber-50 border-l-4 border-amber-500 p-4 mb-6' },
                                h('p', { className: 'text-sm text-amber-800' },
                                    h('strong', null, 'âš¡ Learning Focus: '),
                                    'PM vs Project Manager, stakeholder management, prioritization frameworks, data-driven decisions, and defining success metrics.'
                                )
                            ),
                            h('div', { className: 'grid grid-cols-3 gap-4 mb-8' },
                                h('div', { className: 'text-center p-4 bg-gray-50 rounded-lg' },
                                    h(UsersIcon, { className: 'w-6 h-6 text-indigo-600 mx-auto mb-2' }),
                                    h('div', { className: 'text-sm text-gray-600' }, 'Questions'),
                                    h('div', { className: 'text-xl font-bold text-gray-900' }, simulation.questions.length)
                                ),
                                h('div', { className: 'text-center p-4 bg-gray-50 rounded-lg' },
                                    h(TrophyIcon, { className: 'w-6 h-6 text-indigo-600 mx-auto mb-2' }),
                                    h('div', { className: 'text-sm text-gray-600' }, 'One Attempt'),
                                    h('div', { className: 'text-xl font-bold text-gray-900' }, 'Only')
                                ),
                                h('div', { className: 'text-center p-4 bg-gray-50 rounded-lg' },
                                    h(Share2Icon, { className: 'w-6 h-6 text-indigo-600 mx-auto mb-2' }),
                                    h('div', { className: 'text-sm text-gray-600' }, 'Shareable'),
                                    h('div', { className: 'text-xl font-bold text-gray-900' }, 'Results')
                                )
                            ),
                            h('form', { onSubmit: handleEmailSubmit, className: 'space-y-4' },
                                h('div', null,
                                    h('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Your Email (Required for Certificate & Results)'),
                                    h('div', { className: 'relative' },
                                        h(MailIcon, { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400' }),
                                        h('input', {
                                            type: 'email',
                                            value: email,
                                            onChange: (e) => setEmail(e.target.value),
                                            placeholder: 'your.email@company.com',
                                            required: true,
                                            className: 'w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent'
                                        })
                                    )
                                ),
                                h('button', {
                                    type: 'submit',
                                    className: 'w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 rounded-lg font-semibold hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg hover:shadow-xl'
                                }, 'Start Simulation 1 â†’'),
                                h('p', { className: 'text-xs text-gray-500 text-center' }, "Your email is used only for results delivery and course notifications. No spam.")
                            )
                        )
                    )
                );
            }

            if (showResults) {
                const score = calculateScore();
                const narrative = getNarrative(score.percentage);

                return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6' },
                    h('div', { className: 'max-w-4xl mx-auto' },
                        h('div', { className: 'bg-white rounded-2xl shadow-xl overflow-hidden mb-6' },
                            h('div', { className: 'bg-gradient-to-r from-blue-600 to-blue-700 p-8 text-white text-center' },
                                h(TrophyIcon, { className: 'w-16 h-16 mx-auto mb-4' }),
                                h('div', { className: 'text-sm text-blue-100 mb-2' }, 'Simulation 1/20 Complete'),
                                h('h2', { className: 'text-3xl font-bold mb-2' }, narrative.tier),
                                h('div', { className: 'text-5xl font-bold mb-2' }, `${score.percentage}%`),
                                h('div', { className: 'text-blue-100' }, `Score: ${score.totalPoints} / ${score.maxPoints} points`)
                            ),
                            h('div', { className: 'p-8' },
                                h('h3', { className: 'text-xl font-bold text-gray-900 mb-3' }, narrative.title),
                                h('p', { className: 'text-gray-700 mb-6 leading-relaxed' }, narrative.text),
                                
                                h('div', { className: 'space-y-3' },
                                    h('button', {
                                        onClick: shareToLinkedIn,
                                        className: 'w-full bg-[#0A66C2] text-white py-4 rounded-lg font-semibold hover:bg-[#004182] transition-all flex items-center justify-center gap-2 shadow-lg'
                                    },
                                        h(Share2Icon),
                                        'Share Achievement on LinkedIn'
                                    ),
                                    h('button', {
                                        onClick: downloadBadge,
                                        className: 'w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-4 rounded-lg font-semibold hover:from-purple-500 hover:to-pink-500 transition-all flex items-center justify-center gap-2 shadow-lg'
                                    },
                                        h('svg', { className: 'w-5 h-5', fill: 'none', stroke: 'currentColor', viewBox: '0 0 24 24' },
                                            h('path', { strokeLinecap: 'round', strokeLinejoin: 'round', strokeWidth: 2, d: 'M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4' })
                                        ),
                                        'Download Achievement Badge Image'
                                    ),
                                    h('p', { className: 'text-center text-sm text-gray-500 mt-2' }, 'ðŸ’¡ Pro tip: Download the badge image to add to your LinkedIn post for extra impact!')
                                )
                            )
                        ),
                        h('div', { className: 'bg-white rounded-2xl shadow-xl p-8' },
                            h('h3', { className: 'text-2xl font-bold text-gray-900 mb-6' }, 'Detailed Answer Analysis'),
                            simulation.questions.map((q, idx) => {
                                const userAnswer = answers[idx];
                                const correctAnswer = q.options.reduce((max, opt) => opt.points > max.points ? opt : max, q.options[0]);
                                const selectedOption = q.options.find(opt => opt.feedback === userAnswer.feedback);
                                const isCorrect = selectedOption.points === correctAnswer.points;
                                
                                return h('div', { key: q.id, className: 'mb-8 pb-8 border-b-2 border-gray-200 last:border-0' },
                                    // Question number and score
                                    h('div', { className: 'flex items-start justify-between mb-4' },
                                        h('div', { className: 'flex items-center gap-3' },
                                            h('div', { className: 'w-10 h-10 bg-blue-600 text-white rounded-lg flex items-center justify-center flex-shrink-0 font-bold text-lg' }, 
                                                idx + 1
                                            ),
                                            h('div', null,
                                                h('div', { className: 'text-sm text-gray-500' }, 'Question ' + (idx + 1) + ' of ' + simulation.questions.length),
                                                h('div', { className: 'flex items-center gap-2 mt-1' },
                                                    h('span', { className: 'text-lg font-bold text-gray-900' }, userAnswer.points + ' / ' + correctAnswer.points + ' points'),
                                                    isCorrect 
                                                        ? h('span', { className: 'text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-semibold' }, 'âœ“ Optimal Choice')
                                                        : h('span', { className: 'text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded-full font-semibold' }, 'Room for Improvement')
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Scenario
                                    h('div', { className: 'bg-slate-50 border-l-4 border-slate-300 p-4 mb-4 rounded-r' },
                                        h('div', { className: 'text-xs font-semibold text-slate-600 uppercase tracking-wide mb-2' }, 'Scenario'),
                                        h('p', { className: 'text-sm text-slate-700 leading-relaxed' }, q.scenario)
                                    ),
                                    
                                    // Question
                                    h('div', { className: 'mb-4' },
                                        h('p', { className: 'font-semibold text-gray-900 text-base mb-3' }, q.question)
                                    ),
                                    
                                    // Your Answer
                                    h('div', { className: isCorrect ? 'bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-3' : 'bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-3' },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: isCorrect ? 'text-2xl' : 'text-2xl' }, isCorrect ? 'âœ“' : 'âœ—'),
                                            h('div', { className: 'flex-1' },
                                                h('div', { className: isCorrect ? 'text-xs font-bold text-green-700 uppercase tracking-wide mb-2' : 'text-xs font-bold text-red-700 uppercase tracking-wide mb-2' }, 
                                                    'Your Answer'
                                                ),
                                                h('p', { className: 'text-sm text-gray-800 font-medium mb-2' }, selectedOption.text),
                                                h('p', { className: isCorrect ? 'text-xs text-green-700 font-medium' : 'text-xs text-red-700 font-medium' }, 
                                                    userAnswer.points + ' points earned'
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Correct Answer (only show if user didn't select it)
                                    !isCorrect && h('div', { className: 'bg-green-50 border-2 border-green-200 rounded-lg p-4 mb-4' },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: 'text-2xl' }, 'â˜…'),
                                            h('div', { className: 'flex-1' },
                                                h('div', { className: 'text-xs font-bold text-green-700 uppercase tracking-wide mb-2' }, 
                                                    'Optimal Answer'
                                                ),
                                                h('p', { className: 'text-sm text-gray-800 font-medium mb-2' }, correctAnswer.text),
                                                h('p', { className: 'text-xs text-green-700 font-medium' }, 
                                                    correctAnswer.points + ' points (maximum)'
                                                )
                                            )
                                        )
                                    ),
                                    
                                    // Explanation and Learning
                                    h('div', { className: 'bg-blue-50 border-l-4 border-blue-600 p-4 rounded-r' },
                                        h('div', { className: 'text-xs font-bold text-blue-900 uppercase tracking-wide mb-2' }, 
                                            'ðŸ’¬ Mohan Simham\'s Comments'
                                        ),
                                        h('p', { className: 'text-sm text-gray-700 leading-relaxed mb-3' }, userAnswer.feedback),
                                        !isCorrect && h('div', { className: 'mt-3 pt-3 border-t border-blue-200' },
                                            h('p', { className: 'text-xs font-semibold text-blue-800 mb-2' }, 'Why the optimal answer is better:'),
                                            h('p', { className: 'text-sm text-gray-700 leading-relaxed' }, correctAnswer.feedback)
                                        )
                                    )
                                );
                            })
                        ),
                        h('div', { className: 'text-center mt-8' },
                            h('p', { className: 'text-gray-600 mb-2' }, 'Ready for Simulation 2/20? Continue the PM course to master product discovery & validation!'),
                            h('p', { className: 'text-sm text-gray-500 mb-1' }, 'Â© 2025 Mohan Simham. All Rights Reserved.'),
                            h('p', { className: 'text-xs text-gray-400' }, 
                                'Curated by Mohan Simham â€¢ ',
                                h('a', { 
                                    href: 'https://linkedin.com/in/mohansimham', 
                                    target: '_blank',
                                    className: 'text-blue-400 hover:text-blue-500 underline'
                                }, 'LinkedIn: /mohansimham')
                            )
                        )
                    )
                );
            }

            const currentQ = simulation.questions[currentQuestion];

            return h('div', { className: 'min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6' },
                h('div', { className: 'max-w-3xl mx-auto' },
                    h('div', { className: 'mb-8' },
                        h('div', { className: 'flex justify-between text-sm text-gray-600 mb-2' },
                            h('span', null, `Question ${currentQuestion + 1} of ${simulation.questions.length}`),
                            h('span', null, `${Math.round(((currentQuestion) / simulation.questions.length) * 100)}% Complete`)
                        ),
                        h('div', { className: 'w-full bg-gray-200 rounded-full h-2' },
                            h('div', {
                                className: 'bg-gradient-to-r from-indigo-600 to-blue-600 h-2 rounded-full transition-all duration-500',
                                style: { width: `${((currentQuestion) / simulation.questions.length) * 100}%` }
                            })
                        )
                    ),
                    h('div', { className: 'bg-white rounded-2xl shadow-xl overflow-hidden' },
                        h('div', { className: 'bg-gradient-to-r from-gray-50 to-gray-100 p-6 border-b border-gray-200' },
                            h('div', { className: 'flex items-start gap-3' },
                                h('div', { className: 'w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0' },
                                    h('span', { className: 'text-white font-bold' }, currentQuestion + 1)
                                ),
                                h('div', null,
                                    h('h3', { className: 'font-semibold text-gray-900 mb-2' }, 'Scenario'),
                                    h('p', { className: 'text-gray-700 leading-relaxed' }, currentQ.scenario)
                                )
                            )
                        ),
                        h('div', { className: 'p-6' },
                            h('h4', { className: 'font-bold text-lg text-gray-900 mb-4' }, currentQ.question),
                            h('div', { className: 'space-y-3 mb-6' },
                                currentQ.options.map((option, idx) => {
                                    const isSelected = selectedAnswerIndex === idx;
                                    const buttonClass = isSelected 
                                        ? 'w-full text-left p-4 border-2 rounded-lg transition-all border-blue-600 bg-blue-50' 
                                        : 'w-full text-left p-4 border-2 rounded-lg transition-all border-gray-200 hover:border-blue-500 hover:bg-blue-50';
                                    
                                    const radioClass = isSelected
                                        ? 'w-6 h-6 border-2 rounded-full flex items-center justify-center flex-shrink-0 transition-all border-blue-600 bg-blue-600'
                                        : 'w-6 h-6 border-2 rounded-full flex items-center justify-center flex-shrink-0 transition-all border-gray-400 bg-white';
                                    
                                    const textClass = isSelected 
                                        ? 'leading-relaxed text-gray-900 font-medium' 
                                        : 'leading-relaxed text-gray-700';
                                    
                                    return h('button', {
                                        key: idx,
                                        onClick: () => handleAnswer(idx),
                                        className: buttonClass
                                    },
                                        h('div', { className: 'flex items-start gap-3' },
                                            h('div', { className: radioClass },
                                                isSelected ? h('div', { className: 'w-2.5 h-2.5 bg-white rounded-full' }) : null
                                            ),
                                            h('p', { className: textClass }, option.text)
                                        )
                                    );
                                })
                            ),
                            h('button', {
                                onClick: handleNextChallenge,
                                disabled: selectedAnswerIndex === null,
                                className: selectedAnswerIndex !== null
                                    ? 'w-full py-4 px-6 rounded-lg font-bold text-lg transition-all bg-blue-600 text-white hover:bg-blue-700 shadow-lg hover:shadow-xl cursor-pointer'
                                    : 'w-full py-4 px-6 rounded-lg font-bold text-lg transition-all bg-gray-200 text-gray-400 cursor-not-allowed'
                            }, currentQuestion === simulation.questions.length - 1 ? 'Complete Assessment â†’' : 'Next Challenge â†’')
                        )
                    ),
                    h('div', { className: 'text-center mt-6 text-sm text-gray-500' }, 'ðŸ’¡ Choose carefully - you only get one attempt at this module')
                )
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(PMSimulation));
    </script>
</body>
</html>
