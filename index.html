<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PM Simulation - Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script>
        const { useState } = React;
        const { createElement: h } = React;

        function PMSimulation() {
            const [email, setEmail] = useState('');
            const [hasStarted, setHasStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showResults, setShowResults] = useState(false);

            const simulation = {
                questions: [
                    {
                        id: 1,
                        scenario: "It's July 2009. You're a PM at Airbnb with 4 months of runway left. Revenue is $200/week. Brian Chesky discovered that NYC listings have terrible photos.",
                        question: "What should you do?",
                        options: [
                            { text: "Build scalable features", points: 2, feedback: "Wrong approach. You need to validate before scaling." },
                            { text: "Fly to NYC and photograph listings yourself", points: 10, feedback: "Perfect! Do things that don't scale to learn." },
                            { text: "Hire a photography agency", points: 4, feedback: "Too expensive for an unvalidated hypothesis." },
                            { text: "Add a photo quality score", points: 6, feedback: "You can't gamify a capability gap." }
                        ]
                    },
                    {
                        id: 2,
                        scenario: "September 2010. The photo experiment worked! Now you need to scale it. Cost: $1M annually.",
                        question: "Should you invest?",
                        options: [
                            { text: "Yes - it's a competitive moat", points: 10, feedback: "Exactly! This creates lasting value." },
                            { text: "Make it a paid service", points: 5, feedback: "You'd create a two-tier system." },
                            { text: "Invest in ads instead", points: 3, feedback: "Acquisition without conversion is wasteful." },
                            { text: "Partner with camera companies", points: 4, feedback: "Hosts need results, not equipment." }
                        ]
                    }
                ]
            };

            const handleStart = () => {
                if (email.includes('@')) {
                    setHasStarted(true);
                }
            };

            const handleAnswer = (index) => {
                setSelectedAnswer(index);
            };

            const handleNext = () => {
                if (selectedAnswer === null) return;
                
                const answer = simulation.questions[currentQuestion].options[selectedAnswer];
                setAnswers([...answers, { questionId: currentQuestion, points: answer.points, feedback: answer.feedback }]);
                setSelectedAnswer(null);

                if (currentQuestion === simulation.questions.length - 1) {
                    setShowResults(true);
                } else {
                    setCurrentQuestion(currentQuestion + 1);
                }
            };

            if (!hasStarted) {
                return h('div', { className: 'min-h-screen bg-gray-50 flex items-center justify-center p-6' },
                    h('div', { className: 'max-w-md w-full bg-white rounded-lg shadow-xl p-8' },
                        h('h1', { className: 'text-2xl font-bold mb-4' }, 'PM Simulation Test'),
                        h('p', { className: 'text-gray-600 mb-4' }, 'Enter your email to start'),
                        h('input', {
                            type: 'email',
                            value: email,
                            onChange: (e) => setEmail(e.target.value),
                            placeholder: 'your@email.com',
                            className: 'w-full px-4 py-2 border rounded mb-4'
                        }),
                        h('button', {
                            onClick: handleStart,
                            className: 'w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700'
                        }, 'Start Test')
                    )
                );
            }

            if (showResults) {
                const totalScore = answers.reduce((sum, a) => sum + a.points, 0);
                const maxScore = simulation.questions.length * 10;
                const percentage = Math.round((totalScore / maxScore) * 100);

                return h('div', { className: 'min-h-screen bg-gray-50 p-6' },
                    h('div', { className: 'max-w-2xl mx-auto bg-white rounded-lg shadow-xl p-8' },
                        h('h2', { className: 'text-3xl font-bold mb-4' }, 'Results'),
                        h('p', { className: 'text-xl mb-6' }, `Score: ${totalScore}/${maxScore} (${percentage}%)`),
                        h('div', { className: 'space-y-4' },
                            answers.map((answer, idx) => 
                                h('div', { key: idx, className: 'p-4 bg-gray-50 rounded' },
                                    h('p', { className: 'font-semibold' }, `Question ${idx + 1}: ${answer.points} points`),
                                    h('p', { className: 'text-sm text-gray-600' }, answer.feedback)
                                )
                            )
                        )
                    )
                );
            }

            const q = simulation.questions[currentQuestion];

            return h('div', { className: 'min-h-screen bg-gray-50 p-6' },
                h('div', { className: 'max-w-2xl mx-auto' },
                    h('div', { className: 'mb-4 text-sm text-gray-600' }, 
                        `Question ${currentQuestion + 1} of ${simulation.questions.length}`
                    ),
                    h('div', { className: 'bg-white rounded-lg shadow-xl p-8' },
                        h('div', { className: 'mb-6' },
                            h('p', { className: 'text-gray-700 mb-4' }, q.scenario),
                            h('h3', { className: 'text-xl font-bold' }, q.question)
                        ),
                        h('div', { className: 'space-y-3 mb-6' },
                            q.options.map((option, idx) => 
                                h('button', {
                                    key: idx,
                                    onClick: () => handleAnswer(idx),
                                    className: selectedAnswer === idx
                                        ? 'w-full text-left p-4 border-2 border-blue-600 bg-blue-50 rounded'
                                        : 'w-full text-left p-4 border-2 border-gray-200 hover:border-blue-500 rounded'
                                }, option.text)
                            )
                        ),
                        h('button', {
                            onClick: handleNext,
                            disabled: selectedAnswer === null,
                            className: selectedAnswer !== null
                                ? 'w-full bg-blue-600 text-white py-3 rounded hover:bg-blue-700'
                                : 'w-full bg-gray-300 text-gray-500 py-3 rounded cursor-not-allowed'
                        }, currentQuestion === simulation.questions.length - 1 ? 'Complete' : 'Next')
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(PMSimulation));
    </script>
</body>
</html>
